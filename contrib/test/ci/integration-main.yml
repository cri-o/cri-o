---
- hosts: localhost, all
  become: yes
  remote_user: root
  environment:
    GOPATH: /usr/go
  connection: local
  vars_files:
    - "{{ playbook_dir }}/vars.yml"
  tasks:
    - name: set up the system
      include: "setup.yml"

    - name: build crio 
      include: "build/cri-o.yml" 

    - name: run cri-o integration tests
      include: "integration.yml"

    - name: changing permission of temp file 
      become: yes 
      file: dest=/tmp/artifacts owner=deadbeef group=deadbeef mode=0777 recurse=yes
