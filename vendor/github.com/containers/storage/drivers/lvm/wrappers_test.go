package lvm

import (
	"encoding/json"
	"testing"
)

func TestGetPhysicalVolumes(t *testing.T) {
	report := Report{}
	data := []byte(`{ "report": [ { "pv": [ {"pv_name":"/dev/vda2", "vg_name":"fedora", "pv_fmt":"lvm2", "pv_attr":"a--", "pv_size":"51921289216", "pv_free":"10737418240"} ] } ] }`)
	err := json.Unmarshal(data, &report)
	if err != nil {
		t.Fatal(err)
	}
}

func TestGetVolumeGroups(t *testing.T) {
	report := Report{}
	data := []byte(`{ "report": [ { "vg": [ {"vg_name":"fedora", "pv_count":"1", "lv_count":"3", "snap_count":"0", "vg_attr":"wz--n-", "vg_size":"998113280", "vg_free":"387825664"} ] } ] }`)
	err := json.Unmarshal(data, &report)
	if err != nil {
		t.Fatal(err)
	}
}

func TestGetLogicalVolumes(t *testing.T) {
	report := Report{}
	data := []byte(`{ "report": [ { "lv": [ {"lv_name":"home", "vg_name":"fedora", "lv_attr":"-wi-ao----", "lv_size":"80534831104", "pool_lv":"", "origin":"", "data_percent":"", "metadata_percent":"", "move_pv":"", "mirror_log":"", "copy_percent":"", "convert_lv":""}, {"lv_name":"root", "vg_name":"fedora", "lv_attr":"-wi-ao----", "lv_size":"214748364800", "pool_lv":"", "origin":"", "data_percent":"", "metadata_percent":"", "move_pv":"", "mirror_log":"", "copy_percent":"", "convert_lv":""}, {"lv_name":"swap", "vg_name":"fedora", "lv_attr":"-wi-ao----", "lv_size":"17184063488", "pool_lv":"", "origin":"", "data_percent":"", "metadata_percent":"", "move_pv":"", "mirror_log":"", "copy_percent":"", "convert_lv":""} ] } ] }`)
	err := json.Unmarshal(data, &report)
	if err != nil {
		t.Fatal(err)
	}
}

func TestGetVolumeGroupsFull(t *testing.T) {
	report := ReportFull{}
	data := []byte(`  {
      "report": [
          {
              "vg": [
                  {"vg_fmt":"lvm2", "vg_uuid":"tOGAcA-dXlV-Uec2-vX2C-g7aa-LTey-swVlCf", "vg_name":"fedora", "vg_attr":"wz--n-", "vg_permissions":"writeable", "vg_extendable":"extendable", "vg_exported":"", "vg_partial":"", "vg_allocation_policy":"normal", "vg_clustered":"", "vg_size":"51921289216", "vg_free":"10737418240", "vg_sysid":"", "vg_systemid":"", "vg_lock_type":"", "vg_lock_args":"", "vg_extent_size":"4194304", "vg_extent_count":"12379", "vg_free_count":"2560", "max_lv":"0", "max_pv":"0", "pv_count":"1", "vg_missing_pv_count":"0", "lv_count":"2", "snap_count":"0", "vg_seqno":"29", "vg_tags":"", "vg_profile":"", "vg_mda_count":"1", "vg_mda_used_count":"1", "vg_mda_free":"0", "vg_mda_size":"1044480", "vg_mda_copies":"unmanaged"}
              ]
              ,
              "pv": [
                  {"pv_fmt":"lvm2", "pv_uuid":"Bs15T9-bZUF-xKLb-nRaM-M45W-S0cF-Ey3fzV", "dev_size":"52612300800", "pv_name":"/dev/vda2", "pv_major":"252", "pv_minor":"2", "pv_mda_free":"0", "pv_mda_size":"1044480", "pv_ext_vsn":"2", "pe_start":"1048576", "pv_size":"51921289216", "pv_free":"10737418240", "pv_used":"41183870976", "pv_attr":"a--", "pv_allocatable":"allocatable", "pv_exported":"", "pv_missing":"", "pv_pe_count":"12379", "pv_pe_alloc_count":"9819", "pv_tags":"", "pv_mda_count":"1", "pv_mda_used_count":"1", "pv_ba_start":"0", "pv_ba_size":"0", "pv_in_use":"used", "pv_duplicate":""}
              ]
              ,
              "lv": [
                  {"lv_uuid":"BuGNcQ-0yt0-acJL-7TLL-7vbW-zqxr-W2ZesB", "lv_name":"root", "lv_full_name":"fedora/root", "lv_path":"/dev/fedora/root", "lv_dm_path":"/dev/mapper/fedora-root", "lv_parent":"", "lv_attr":"-wi-ao----", "lv_layout":"linear", "lv_role":"public", "lv_initial_image_sync":"", "lv_image_synced":"", "lv_merging":"", "lv_converting":"", "lv_allocation_policy":"inherit", "lv_allocation_locked":"", "lv_fixed_minor":"", "lv_merge_failed":"unknown", "lv_snapshot_invalid":"unknown", "lv_skip_activation":"", "lv_when_full":"", "lv_active":"active", "lv_active_locally":"active locally", "lv_active_remotely":"", "lv_active_exclusively":"active exclusively", "lv_major":"-1", "lv_minor":"-1", "lv_read_ahead":"auto", "lv_size":"37589352448", "lv_metadata_size":"", "seg_count":"1", "origin":"", "origin_uuid":"", "origin_size":"", "lv_ancestors":"", "lv_full_ancestors":"", "lv_descendants":"", "lv_full_descendants":"", "data_percent":"", "snap_percent":"", "metadata_percent":"", "copy_percent":"", "sync_percent":"", "raid_mismatch_count":"", "raid_sync_action":"", "raid_write_behind":"", "raid_min_recovery_rate":"", "raid_max_recovery_rate":"", "move_pv":"", "move_pv_uuid":"", "convert_lv":"", "convert_lv_uuid":"", "mirror_log":"", "mirror_log_uuid":"", "data_lv":"", "data_lv_uuid":"", "metadata_lv":"", "metadata_lv_uuid":"", "pool_lv":"", "pool_lv_uuid":"", "lv_tags":"", "lv_profile":"", "lv_lockargs":"", "lv_time":"2017-04-06 15:35:36 -0400", "lv_time_removed":"", "lv_host":"localhost.localdomain", "lv_modules":"", "lv_historical":"", "lv_kernel_major":"253", "lv_kernel_minor":"0", "lv_kernel_read_ahead":"131072", "lv_permissions":"writeable", "lv_suspended":"", "lv_live_table":"live table present", "lv_inactive_table":"", "lv_device_open":"open", "cache_total_blocks":"", "cache_used_blocks":"", "cache_dirty_blocks":"", "cache_read_hits":"", "cache_read_misses":"", "cache_write_hits":"", "cache_write_misses":"", "kernel_cache_settings":"", "kernel_cache_policy":"", "lv_health_status":"", "kernel_discards":"", "lv_check_needed":"unknown"},
                  {"lv_uuid":"iUPyEK-Yqvu-dRcT-fJ8h-4i60-0iUS-u1opZb", "lv_name":"swap", "lv_full_name":"fedora/swap", "lv_path":"/dev/fedora/swap", "lv_dm_path":"/dev/mapper/fedora-swap", "lv_parent":"", "lv_attr":"-wi-ao----", "lv_layout":"linear", "lv_role":"public", "lv_initial_image_sync":"", "lv_image_synced":"", "lv_merging":"", "lv_converting":"", "lv_allocation_policy":"inherit", "lv_allocation_locked":"", "lv_fixed_minor":"", "lv_merge_failed":"unknown", "lv_snapshot_invalid":"unknown", "lv_skip_activation":"", "lv_when_full":"", "lv_active":"active", "lv_active_locally":"active locally", "lv_active_remotely":"", "lv_active_exclusively":"active exclusively", "lv_major":"-1", "lv_minor":"-1", "lv_read_ahead":"auto", "lv_size":"3594518528", "lv_metadata_size":"", "seg_count":"1", "origin":"", "origin_uuid":"", "origin_size":"", "lv_ancestors":"", "lv_full_ancestors":"", "lv_descendants":"", "lv_full_descendants":"", "data_percent":"", "snap_percent":"", "metadata_percent":"", "copy_percent":"", "sync_percent":"", "raid_mismatch_count":"", "raid_sync_action":"", "raid_write_behind":"", "raid_min_recovery_rate":"", "raid_max_recovery_rate":"", "move_pv":"", "move_pv_uuid":"", "convert_lv":"", "convert_lv_uuid":"", "mirror_log":"", "mirror_log_uuid":"", "data_lv":"", "data_lv_uuid":"", "metadata_lv":"", "metadata_lv_uuid":"", "pool_lv":"", "pool_lv_uuid":"", "lv_tags":"", "lv_profile":"", "lv_lockargs":"", "lv_time":"2017-04-06 15:35:36 -0400", "lv_time_removed":"", "lv_host":"localhost.localdomain", "lv_modules":"", "lv_historical":"", "lv_kernel_major":"253", "lv_kernel_minor":"1", "lv_kernel_read_ahead":"131072", "lv_permissions":"writeable", "lv_suspended":"", "lv_live_table":"live table present", "lv_inactive_table":"", "lv_device_open":"open", "cache_total_blocks":"", "cache_used_blocks":"", "cache_dirty_blocks":"", "cache_read_hits":"", "cache_read_misses":"", "cache_write_hits":"", "cache_write_misses":"", "kernel_cache_settings":"", "kernel_cache_policy":"", "lv_health_status":"", "kernel_discards":"", "lv_check_needed":"unknown"}
              ]
              ,
              "pvseg": [
                  {"pvseg_start":"0", "pvseg_size":"857", "pv_uuid":"Bs15T9-bZUF-xKLb-nRaM-M45W-S0cF-Ey3fzV", "lv_uuid":"iUPyEK-Yqvu-dRcT-fJ8h-4i60-0iUS-u1opZb"},
                  {"pvseg_start":"857", "pvseg_size":"163", "pv_uuid":"Bs15T9-bZUF-xKLb-nRaM-M45W-S0cF-Ey3fzV", "lv_uuid":""},
                  {"pvseg_start":"1020", "pvseg_size":"8962", "pv_uuid":"Bs15T9-bZUF-xKLb-nRaM-M45W-S0cF-Ey3fzV", "lv_uuid":"BuGNcQ-0yt0-acJL-7TLL-7vbW-zqxr-W2ZesB"},
                  {"pvseg_start":"9982", "pvseg_size":"2397", "pv_uuid":"Bs15T9-bZUF-xKLb-nRaM-M45W-S0cF-Ey3fzV", "lv_uuid":""}
              ]
              ,
              "seg": [
                  {"segtype":"linear", "stripes":"1", "stripe_size":"0", "region_size":"0", "chunk_size":"0", "thin_count":"", "discards":"", "cache_mode":"", "zero":"unknown", "transaction_id":"", "thin_id":"", "seg_start":"0", "seg_start_pe":"0", "seg_size":"37589352448", "seg_size_pe":"8962", "seg_tags":"", "seg_pe_ranges":"/dev/vda2:1020-9981", "seg_le_ranges":"/dev/vda2:1020-9981", "seg_metadata_le_ranges":"", "devices":"/dev/vda2(1020)", "metadata_devices":"", "seg_monitor":"", "cache_policy":"", "cache_settings":"", "lv_uuid":"BuGNcQ-0yt0-acJL-7TLL-7vbW-zqxr-W2ZesB"},
                  {"segtype":"linear", "stripes":"1", "stripe_size":"0", "region_size":"0", "chunk_size":"0", "thin_count":"", "discards":"", "cache_mode":"", "zero":"unknown", "transaction_id":"", "thin_id":"", "seg_start":"0", "seg_start_pe":"0", "seg_size":"3594518528", "seg_size_pe":"857", "seg_tags":"", "seg_pe_ranges":"/dev/vda2:0-856", "seg_le_ranges":"/dev/vda2:0-856", "seg_metadata_le_ranges":"", "devices":"/dev/vda2(0)", "metadata_devices":"", "seg_monitor":"", "cache_policy":"", "cache_settings":"", "lv_uuid":"iUPyEK-Yqvu-dRcT-fJ8h-4i60-0iUS-u1opZb"}
              ]
          }
          ,
          {
              "vg": [
                  {"vg_fmt":"lvm2", "vg_uuid":"i0V8fs-wJgb-Eq2d-I5Fq-S12y-10of-uYsMXg", "vg_name":"containers", "vg_attr":"wz--n-", "vg_permissions":"writeable", "vg_extendable":"extendable", "vg_exported":"", "vg_partial":"", "vg_allocation_policy":"normal", "vg_clustered":"", "vg_size":"10733223936", "vg_free":"25165824", "vg_sysid":"", "vg_systemid":"", "vg_lock_type":"", "vg_lock_args":"", "vg_extent_size":"4194304", "vg_extent_count":"2559", "vg_free_count":"6", "max_lv":"0", "max_pv":"0", "pv_count":"1", "vg_missing_pv_count":"0", "lv_count":"5", "snap_count":"0", "vg_seqno":"26", "vg_tags":"", "vg_profile":"", "vg_mda_count":"1", "vg_mda_used_count":"1", "vg_mda_free":"0", "vg_mda_size":"1044480", "vg_mda_copies":"unmanaged"}
              ]
              ,
              "pv": [
                  {"pv_fmt":"lvm2", "pv_uuid":"MoO8eM-YPmw-TNOM-MPY6-34e2-eYfW-YHGuOT", "dev_size":"10737418240", "pv_name":"/dev/loop0", "pv_major":"7", "pv_minor":"0", "pv_mda_free":"0", "pv_mda_size":"1044480", "pv_ext_vsn":"2", "pe_start":"1048576", "pv_size":"10733223936", "pv_free":"25165824", "pv_used":"10708058112", "pv_attr":"a--", "pv_allocatable":"allocatable", "pv_exported":"", "pv_missing":"", "pv_pe_count":"2559", "pv_pe_alloc_count":"2553", "pv_tags":"", "pv_mda_count":"1", "pv_mda_used_count":"1", "pv_ba_start":"0", "pv_ba_size":"0", "pv_in_use":"used", "pv_duplicate":""}
              ]
              ,
              "lv": [
                  {"lv_uuid":"UncqPW-cA25-YPg7-n7Qh-5zx5-zY2W-M0nWZx", "lv_name":"fedora", "lv_full_name":"containers/fedora", "lv_path":"", "lv_dm_path":"/dev/mapper/containers-fedora", "lv_parent":"", "lv_attr":"twi-a-tz--", "lv_layout":"thin,pool", "lv_role":"private", "lv_initial_image_sync":"", "lv_image_synced":"", "lv_merging":"", "lv_converting":"", "lv_allocation_policy":"inherit", "lv_allocation_locked":"", "lv_fixed_minor":"", "lv_merge_failed":"unknown", "lv_snapshot_invalid":"unknown", "lv_skip_activation":"", "lv_when_full":"queue", "lv_active":"active", "lv_active_locally":"active locally", "lv_active_remotely":"", "lv_active_exclusively":"active exclusively", "lv_major":"-1", "lv_minor":"-1", "lv_read_ahead":"auto", "lv_size":"247463936", "lv_metadata_size":"20971520", "seg_count":"1", "origin":"", "origin_uuid":"", "origin_size":"", "lv_ancestors":"", "lv_full_ancestors":"", "lv_descendants":"", "lv_full_descendants":"", "data_percent":"0.00", "snap_percent":"0.00", "metadata_percent":"0.18", "copy_percent":"", "sync_percent":"", "raid_mismatch_count":"", "raid_sync_action":"", "raid_write_behind":"", "raid_min_recovery_rate":"", "raid_max_recovery_rate":"", "move_pv":"", "move_pv_uuid":"", "convert_lv":"", "convert_lv_uuid":"", "mirror_log":"", "mirror_log_uuid":"", "data_lv":"[fedora_tdata]", "data_lv_uuid":"rn2Pgq-hAGo-2kN1-YboZ-HZZd-wI4i-643kKK", "metadata_lv":"[fedora_tmeta]", "metadata_lv_uuid":"TuTYUM-ii2H-AgIb-dNNg-SAqr-8Rie-3lgOzb", "pool_lv":"", "pool_lv_uuid":"", "lv_tags":"", "lv_profile":"", "lv_lockargs":"", "lv_time":"2017-06-09 18:14:28 -0400", "lv_time_removed":"", "lv_host":"localhost.localdomain", "lv_modules":"thin-pool", "lv_historical":"", "lv_kernel_major":"253", "lv_kernel_minor":"8", "lv_kernel_read_ahead":"131072", "lv_permissions":"writeable", "lv_suspended":"", "lv_live_table":"live table present", "lv_inactive_table":"", "lv_device_open":"", "cache_total_blocks":"", "cache_used_blocks":"", "cache_dirty_blocks":"", "cache_read_hits":"", "cache_read_misses":"", "cache_write_hits":"", "cache_write_misses":"", "kernel_cache_settings":"", "kernel_cache_policy":"", "lv_health_status":"", "kernel_discards":"passdown", "lv_check_needed":""},
                  {"lv_uuid":"kar5jb-OpFU-87Dv-TJfi-yyVg-Lbbk-kWQ4KG", "lv_name":"layer.3679d7ddfb20ee28cae6469f77b6360b96c6a1eac9fce660d3993b37eee22d84", "lv_full_name":"containers/layer.3679d7ddfb20ee28cae6469f77b6360b96c6a1eac9fce660d3993b37eee22d84", "lv_path":"/dev/containers/layer.3679d7ddfb20ee28cae6469f77b6360b96c6a1eac9fce660d3993b37eee22d84", "lv_dm_path":"/dev/mapper/containers-layer.3679d7ddfb20ee28cae6469f77b6360b96c6a1eac9fce660d3993b37eee22d84", "lv_parent":"", "lv_attr":"Vwi---tz-k", "lv_layout":"thin,sparse", "lv_role":"public,snapshot,thinsnapshot", "lv_initial_image_sync":"", "lv_image_synced":"", "lv_merging":"", "lv_converting":"", "lv_allocation_policy":"inherit", "lv_allocation_locked":"", "lv_fixed_minor":"", "lv_merge_failed":"unknown", "lv_snapshot_invalid":"unknown", "lv_skip_activation":"skip activation", "lv_when_full":"", "lv_active":"", "lv_active_locally":"", "lv_active_remotely":"", "lv_active_exclusively":"", "lv_major":"-1", "lv_minor":"-1", "lv_read_ahead":"auto", "lv_size":"8946450432", "lv_metadata_size":"", "seg_count":"1", "origin":"layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "origin_uuid":"YiDGjo-62c9-Lg0c-6p6g-LYCa-VdXv-O71fM3", "origin_size":"", "lv_ancestors":"layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "lv_full_ancestors":"layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "lv_descendants":"", "lv_full_descendants":"", "data_percent":"", "snap_percent":"", "metadata_percent":"", "copy_percent":"", "sync_percent":"", "raid_mismatch_count":"", "raid_sync_action":"", "raid_write_behind":"", "raid_min_recovery_rate":"", "raid_max_recovery_rate":"", "move_pv":"", "move_pv_uuid":"", "convert_lv":"", "convert_lv_uuid":"", "mirror_log":"", "mirror_log_uuid":"", "data_lv":"", "data_lv_uuid":"", "metadata_lv":"", "metadata_lv_uuid":"", "pool_lv":"loopbackpool", "pool_lv_uuid":"WIcSPU-wPkY-65mB-VMnj-8v3x-6L9H-dyS4NB", "lv_tags":"", "lv_profile":"", "lv_lockargs":"", "lv_time":"2017-06-09 18:09:54 -0400", "lv_time_removed":"", "lv_host":"localhost.localdomain", "lv_modules":"thin,thin-pool", "lv_historical":"", "lv_kernel_major":"-1", "lv_kernel_minor":"-1", "lv_kernel_read_ahead":"-1", "lv_permissions":"unknown", "lv_suspended":"unknown", "lv_live_table":"unknown", "lv_inactive_table":"unknown", "lv_device_open":"unknown", "cache_total_blocks":"", "cache_used_blocks":"", "cache_dirty_blocks":"", "cache_read_hits":"", "cache_read_misses":"", "cache_write_hits":"", "cache_write_misses":"", "kernel_cache_settings":"", "kernel_cache_policy":"", "lv_health_status":"", "kernel_discards":"", "lv_check_needed":"unknown"},
                  {"lv_uuid":"YiDGjo-62c9-Lg0c-6p6g-LYCa-VdXv-O71fM3", "lv_name":"layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "lv_full_name":"containers/layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "lv_path":"/dev/containers/layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "lv_dm_path":"/dev/mapper/containers-layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "lv_parent":"", "lv_attr":"Vwi---tz-k", "lv_layout":"thin,sparse", "lv_role":"public,origin,thinorigin,multithinorigin", "lv_initial_image_sync":"", "lv_image_synced":"", "lv_merging":"", "lv_converting":"", "lv_allocation_policy":"inherit", "lv_allocation_locked":"", "lv_fixed_minor":"", "lv_merge_failed":"unknown", "lv_snapshot_invalid":"unknown", "lv_skip_activation":"skip activation", "lv_when_full":"", "lv_active":"", "lv_active_locally":"", "lv_active_remotely":"", "lv_active_exclusively":"", "lv_major":"-1", "lv_minor":"-1", "lv_read_ahead":"auto", "lv_size":"8946450432", "lv_metadata_size":"", "seg_count":"1", "origin":"", "origin_uuid":"", "origin_size":"", "lv_ancestors":"", "lv_full_ancestors":"", "lv_descendants":"layer.ee2a2685384227c87828461183551ffe012ae5eaba60aaa201b36c5ccefe1b13,layer.3679d7ddfb20ee28cae6469f77b6360b96c6a1eac9fce660d3993b37eee22d84", "lv_full_descendants":"layer.ee2a2685384227c87828461183551ffe012ae5eaba60aaa201b36c5ccefe1b13,layer.3679d7ddfb20ee28cae6469f77b6360b96c6a1eac9fce660d3993b37eee22d84", "data_percent":"", "snap_percent":"", "metadata_percent":"", "copy_percent":"", "sync_percent":"", "raid_mismatch_count":"", "raid_sync_action":"", "raid_write_behind":"", "raid_min_recovery_rate":"", "raid_max_recovery_rate":"", "move_pv":"", "move_pv_uuid":"", "convert_lv":"", "convert_lv_uuid":"", "mirror_log":"", "mirror_log_uuid":"", "data_lv":"", "data_lv_uuid":"", "metadata_lv":"", "metadata_lv_uuid":"", "pool_lv":"loopbackpool", "pool_lv_uuid":"WIcSPU-wPkY-65mB-VMnj-8v3x-6L9H-dyS4NB", "lv_tags":"", "lv_profile":"", "lv_lockargs":"", "lv_time":"2017-06-09 18:04:50 -0400", "lv_time_removed":"", "lv_host":"localhost.localdomain", "lv_modules":"thin,thin-pool", "lv_historical":"", "lv_kernel_major":"-1", "lv_kernel_minor":"-1", "lv_kernel_read_ahead":"-1", "lv_permissions":"unknown", "lv_suspended":"unknown", "lv_live_table":"unknown", "lv_inactive_table":"unknown", "lv_device_open":"unknown", "cache_total_blocks":"", "cache_used_blocks":"", "cache_dirty_blocks":"", "cache_read_hits":"", "cache_read_misses":"", "cache_write_hits":"", "cache_write_misses":"", "kernel_cache_settings":"", "kernel_cache_policy":"", "lv_health_status":"", "kernel_discards":"", "lv_check_needed":"unknown"},
                  {"lv_uuid":"JIgpFL-Qjj1-Wqc8-PMXm-80VC-X2iv-KpFXYq", "lv_name":"layer.ee2a2685384227c87828461183551ffe012ae5eaba60aaa201b36c5ccefe1b13", "lv_full_name":"containers/layer.ee2a2685384227c87828461183551ffe012ae5eaba60aaa201b36c5ccefe1b13", "lv_path":"/dev/containers/layer.ee2a2685384227c87828461183551ffe012ae5eaba60aaa201b36c5ccefe1b13", "lv_dm_path":"/dev/mapper/containers-layer.ee2a2685384227c87828461183551ffe012ae5eaba60aaa201b36c5ccefe1b13", "lv_parent":"", "lv_attr":"Vwi---tz-k", "lv_layout":"thin,sparse", "lv_role":"public,snapshot,thinsnapshot", "lv_initial_image_sync":"", "lv_image_synced":"", "lv_merging":"", "lv_converting":"", "lv_allocation_policy":"inherit", "lv_allocation_locked":"", "lv_fixed_minor":"", "lv_merge_failed":"unknown", "lv_snapshot_invalid":"unknown", "lv_skip_activation":"skip activation", "lv_when_full":"", "lv_active":"", "lv_active_locally":"", "lv_active_remotely":"", "lv_active_exclusively":"", "lv_major":"-1", "lv_minor":"-1", "lv_read_ahead":"auto", "lv_size":"8946450432", "lv_metadata_size":"", "seg_count":"1", "origin":"layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "origin_uuid":"YiDGjo-62c9-Lg0c-6p6g-LYCa-VdXv-O71fM3", "origin_size":"", "lv_ancestors":"layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "lv_full_ancestors":"layer.a4317dcde216c1ce21844428c554c314806a8e9f6723f90b6f694e344cbfc01a", "lv_descendants":"", "lv_full_descendants":"", "data_percent":"", "snap_percent":"", "metadata_percent":"", "copy_percent":"", "sync_percent":"", "raid_mismatch_count":"", "raid_sync_action":"", "raid_write_behind":"", "raid_min_recovery_rate":"", "raid_max_recovery_rate":"", "move_pv":"", "move_pv_uuid":"", "convert_lv":"", "convert_lv_uuid":"", "mirror_log":"", "mirror_log_uuid":"", "data_lv":"", "data_lv_uuid":"", "metadata_lv":"", "metadata_lv_uuid":"", "pool_lv":"loopbackpool", "pool_lv_uuid":"WIcSPU-wPkY-65mB-VMnj-8v3x-6L9H-dyS4NB", "lv_tags":"", "lv_profile":"", "lv_lockargs":"", "lv_time":"2017-06-09 18:09:46 -0400", "lv_time_removed":"", "lv_host":"localhost.localdomain", "lv_modules":"thin,thin-pool", "lv_historical":"", "lv_kernel_major":"-1", "lv_kernel_minor":"-1", "lv_kernel_read_ahead":"-1", "lv_permissions":"unknown", "lv_suspended":"unknown", "lv_live_table":"unknown", "lv_inactive_table":"unknown", "lv_device_open":"unknown", "cache_total_blocks":"", "cache_used_blocks":"", "cache_dirty_blocks":"", "cache_read_hits":"", "cache_read_misses":"", "cache_write_hits":"", "cache_write_misses":"", "kernel_cache_settings":"", "kernel_cache_policy":"", "lv_health_status":"", "kernel_discards":"", "lv_check_needed":"unknown"},
                  {"lv_uuid":"WIcSPU-wPkY-65mB-VMnj-8v3x-6L9H-dyS4NB", "lv_name":"loopbackpool", "lv_full_name":"containers/loopbackpool", "lv_path":"", "lv_dm_path":"/dev/mapper/containers-loopbackpool", "lv_parent":"", "lv_attr":"twi-aotz--", "lv_layout":"thin,pool", "lv_role":"private", "lv_initial_image_sync":"", "lv_image_synced":"", "lv_merging":"", "lv_converting":"", "lv_allocation_policy":"inherit", "lv_allocation_locked":"", "lv_fixed_minor":"", "lv_merge_failed":"unknown", "lv_snapshot_invalid":"unknown", "lv_skip_activation":"", "lv_when_full":"queue", "lv_active":"active", "lv_active_locally":"active locally", "lv_active_remotely":"", "lv_active_exclusively":"active exclusively", "lv_major":"-1", "lv_minor":"-1", "lv_read_ahead":"auto", "lv_size":"8946450432", "lv_metadata_size":"746586112", "seg_count":"1", "origin":"", "origin_uuid":"", "origin_size":"", "lv_ancestors":"", "lv_full_ancestors":"", "lv_descendants":"", "lv_full_descendants":"", "data_percent":"0.39", "snap_percent":"0.39", "metadata_percent":"0.02", "copy_percent":"", "sync_percent":"", "raid_mismatch_count":"", "raid_sync_action":"", "raid_write_behind":"", "raid_min_recovery_rate":"", "raid_max_recovery_rate":"", "move_pv":"", "move_pv_uuid":"", "convert_lv":"", "convert_lv_uuid":"", "mirror_log":"", "mirror_log_uuid":"", "data_lv":"[loopbackpool_tdata]", "data_lv_uuid":"4ukIil-uJZ9-gw1Z-P1mw-l1l8-dTSx-pj2tPq", "metadata_lv":"[loopbackpool_tmeta]", "metadata_lv_uuid":"0sjZR2-CBVE-U7hW-1ARf-FJNv-VAfR-eL7upc", "pool_lv":"", "pool_lv_uuid":"", "lv_tags":"", "lv_profile":"", "lv_lockargs":"", "lv_time":"2017-06-09 18:04:35 -0400", "lv_time_removed":"", "lv_host":"localhost.localdomain", "lv_modules":"thin-pool", "lv_historical":"", "lv_kernel_major":"253", "lv_kernel_minor":"4", "lv_kernel_read_ahead":"131072", "lv_permissions":"writeable", "lv_suspended":"", "lv_live_table":"live table present", "lv_inactive_table":"", "lv_device_open":"open", "cache_total_blocks":"", "cache_used_blocks":"", "cache_dirty_blocks":"", "cache_read_hits":"", "cache_read_misses":"", "cache_write_hits":"", "cache_write_misses":"", "kernel_cache_settings":"", "kernel_cache_policy":"", "lv_health_status":"", "kernel_discards":"passdown", "lv_check_needed":""}
              ]
              ,
              "pvseg": [
                  {"pvseg_start":"0", "pvseg_size":"2133", "pv_uuid":"MoO8eM-YPmw-TNOM-MPY6-34e2-eYfW-YHGuOT", "lv_uuid":"4ukIil-uJZ9-gw1Z-P1mw-l1l8-dTSx-pj2tPq"},
                  {"pvseg_start":"2133", "pvseg_size":"178", "pv_uuid":"MoO8eM-YPmw-TNOM-MPY6-34e2-eYfW-YHGuOT", "lv_uuid":"0sjZR2-CBVE-U7hW-1ARf-FJNv-VAfR-eL7upc"},
                  {"pvseg_start":"2311", "pvseg_size":"178", "pv_uuid":"MoO8eM-YPmw-TNOM-MPY6-34e2-eYfW-YHGuOT", "lv_uuid":"GFo1gq-fSv8-hI1j-SiGG-dDsH-9xES-BysmVX"},
                  {"pvseg_start":"2489", "pvseg_size":"59", "pv_uuid":"MoO8eM-YPmw-TNOM-MPY6-34e2-eYfW-YHGuOT", "lv_uuid":"rn2Pgq-hAGo-2kN1-YboZ-HZZd-wI4i-643kKK"},
                  {"pvseg_start":"2548", "pvseg_size":"5", "pv_uuid":"MoO8eM-YPmw-TNOM-MPY6-34e2-eYfW-YHGuOT", "lv_uuid":"TuTYUM-ii2H-AgIb-dNNg-SAqr-8Rie-3lgOzb"},
                  {"pvseg_start":"2553", "pvseg_size":"6", "pv_uuid":"MoO8eM-YPmw-TNOM-MPY6-34e2-eYfW-YHGuOT", "lv_uuid":""}
              ]
              ,
              "seg": [
                  {"segtype":"thin", "stripes":"0", "stripe_size":"0", "region_size":"0", "chunk_size":"0", "thin_count":"", "discards":"passdown", "cache_mode":"", "zero":"zero", "transaction_id":"1", "thin_id":"2", "seg_start":"0", "seg_start_pe":"0", "seg_size":"8946450432", "seg_size_pe":"2133", "seg_tags":"", "seg_pe_ranges":"", "seg_le_ranges":"", "seg_metadata_le_ranges":"", "devices":"", "metadata_devices":"", "seg_monitor":"", "cache_policy":"", "cache_settings":"", "lv_uuid":"JIgpFL-Qjj1-Wqc8-PMXm-80VC-X2iv-KpFXYq"},
                  {"segtype":"thin-pool", "stripes":"1", "stripe_size":"0", "region_size":"0", "chunk_size":"65536", "thin_count":"0", "discards":"passdown", "cache_mode":"", "zero":"zero", "transaction_id":"0", "thin_id":"", "seg_start":"0", "seg_start_pe":"0", "seg_size":"247463936", "seg_size_pe":"59", "seg_tags":"", "seg_pe_ranges":"fedora_tdata:0-58", "seg_le_ranges":"[fedora_tdata]:0-58", "seg_metadata_le_ranges":"", "devices":"fedora_tdata(0)", "metadata_devices":"", "seg_monitor":"monitored", "cache_policy":"", "cache_settings":"", "lv_uuid":"UncqPW-cA25-YPg7-n7Qh-5zx5-zY2W-M0nWZx"},
                  {"segtype":"thin-pool", "stripes":"1", "stripe_size":"0", "region_size":"0", "chunk_size":"65536", "thin_count":"3", "discards":"passdown", "cache_mode":"", "zero":"zero", "transaction_id":"3", "thin_id":"", "seg_start":"0", "seg_start_pe":"0", "seg_size":"8946450432", "seg_size_pe":"2133", "seg_tags":"", "seg_pe_ranges":"loopbackpool_tdata:0-2132", "seg_le_ranges":"[loopbackpool_tdata]:0-2132", "seg_metadata_le_ranges":"", "devices":"loopbackpool_tdata(0)", "metadata_devices":"", "seg_monitor":"monitored", "cache_policy":"", "cache_settings":"", "lv_uuid":"WIcSPU-wPkY-65mB-VMnj-8v3x-6L9H-dyS4NB"},
                  {"segtype":"thin", "stripes":"0", "stripe_size":"0", "region_size":"0", "chunk_size":"0", "thin_count":"", "discards":"passdown", "cache_mode":"", "zero":"zero", "transaction_id":"0", "thin_id":"1", "seg_start":"0", "seg_start_pe":"0", "seg_size":"8946450432", "seg_size_pe":"2133", "seg_tags":"", "seg_pe_ranges":"", "seg_le_ranges":"", "seg_metadata_le_ranges":"", "devices":"", "metadata_devices":"", "seg_monitor":"", "cache_policy":"", "cache_settings":"", "lv_uuid":"YiDGjo-62c9-Lg0c-6p6g-LYCa-VdXv-O71fM3"},
                  {"segtype":"thin", "stripes":"0", "stripe_size":"0", "region_size":"0", "chunk_size":"0", "thin_count":"", "discards":"passdown", "cache_mode":"", "zero":"zero", "transaction_id":"2", "thin_id":"3", "seg_start":"0", "seg_start_pe":"0", "seg_size":"8946450432", "seg_size_pe":"2133", "seg_tags":"", "seg_pe_ranges":"", "seg_le_ranges":"", "seg_metadata_le_ranges":"", "devices":"", "metadata_devices":"", "seg_monitor":"", "cache_policy":"", "cache_settings":"", "lv_uuid":"kar5jb-OpFU-87Dv-TJfi-yyVg-Lbbk-kWQ4KG"}
              ]
          }
      ]
  }
`)
	err := json.Unmarshal(data, &report)
	if err != nil {
		t.Fatal(err)
	}
}
